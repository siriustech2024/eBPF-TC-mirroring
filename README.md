# README.md

# mirror_tc

This project implements network traffic mirroring between interfaces using eBPF and the Linux `tc` (Traffic Control) utility.

## Files

- [`mirror_tc.c`](mirror_tc.c): eBPF program that performs packet mirroring.
- [`mirror.sh`](mirror.sh): Script to activate, remove, and list mirroring between interfaces.
- [`Makefile`](Makefile): Compiles the eBPF program using clang.
- `mirror_tc.o`: Object file generated by compiling the eBPF code.

## Prerequisites

- Linux with eBPF and tc (iproute2) support
- clang (to compile the eBPF program)
- Root permissions

## Usage

### Activate mirroring

```sh
sudo ./mirror.sh <iface_src> <iface_dst>
```

- `<iface_src>`: Source interface from which traffic will be mirrored.
- `<iface_dst>`: Destination interface to which traffic will be mirrored.

### Remove mirroring

```sh
sudo ./mirror.sh stop <iface_src>
```

### List active mirrorings

```sh
sudo ./mirror.sh list
```

## How it works

The [`mirror.sh`](mirror.sh) script compiles the eBPF program [`mirror_tc.c`](mirror_tc.c) and attaches it to the source interface using `tc`. The eBPF program uses the `bpf_clone_redirect` function to redirect packets received on the source interface to the destination interface.

## License

Dual BSD/GPL (as specified in the eBPF